# Kat

Kat, the Keycloak Analysis Tool, assists with understanding the workings of Keycloak.

Kat provides information about the Keycloak database structure.

## Limitations

This tool has been developed and tested against the following components.

* Keycloak version 5.0.0
* MariaDB database version 10.3
* phpMyAdmin version 4.6 (to export the Keycloak database structure)

## Installation

Add this line to your application's Gemfile:

```ruby
gem 'kat'
```

And then execute:

    $ bundle

Or install it yourself as:

    $ gem install kat

## Usage

### Obtain database structure

From phpMyAdmin:

1. keycloak database
1. Export tab
   1. Export method: Custom - display all possible options
   1. Tables:
      1. all tables should have Structure checked
      1. all tables should have Data unchecked
   1. Output: Save output to a file
      1. Character set of the file: utf-8
      1. Compression: none
   1. Format specific options: Display comments
   1. Object creation options: only the following items should be checked:
      * AUTO_INCREMENT value (under Add CREATE TABLE statement)
      * Enclose table and column names with backquotes
   1. "Go" button to download the SQL file

### Test processing of database structure

To test processing of an SQL file generated by a myPhpAdmin export of the
database structure, use the following command.

    $ kat read sample/keycloak-5.0.0-mariadb-phpmyadmin.sql

where keycloak.sql is the SQL file generated by myPhpAdmin. If no errors are
encountered, kat will display the number of tables and constraints found.

## Development

After checking out the repo, run `bin/setup` to install dependencies. Then, run `rake test` to run the tests. You can also run `bin/console` for an interactive prompt that will allow you to experiment.

To install this gem onto your local machine, run `bundle exec rake install`. To release a new version, update the version number in `version.rb`, and then run `bundle exec rake release`, which will create a git tag for the version, push git commits and tags, and push the `.gem` file to [rubygems.org](https://rubygems.org).

## Contributing

Bug reports and pull requests are welcome on GitHub at https://github.com/[USERNAME]/kat. This project is intended to be a safe, welcoming space for collaboration, and contributors are expected to adhere to the [Contributor Covenant](http://contributor-covenant.org) code of conduct.

## License

The gem is available as open source under the terms of the [MIT License](https://opensource.org/licenses/MIT).

## Code of Conduct

Everyone interacting in the Kat projectâ€™s codebases, issue trackers, chat rooms and mailing lists is expected to follow the [code of conduct](https://github.com/[USERNAME]/kat/blob/master/CODE_OF_CONDUCT.md).
